<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Music Player</title>
    <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 40px 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            background-attachment: fixed;
            background-size: cover;
            min-height: 100vh;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            color: #333;
        }
        html { height: 100%; }

        .music-player {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 2rem;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            width: 400px;
            max-width: 90vw;
            position: relative;
            overflow: hidden;
            margin: 0 auto 40px;
        }
        .music-player::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(45deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            pointer-events: none;
        }
        .player-header { text-align: center; margin-bottom: 2rem; position: relative; z-index:2; }
        .player-title { font-size: 1.5rem; font-weight: bold; color: #667eea; margin-bottom: 0.5rem; }

        .album-art {
            width: 200px; height: 200px; border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            margin: 0 auto 2rem; display:flex; align-items:center; justify-content:center;
            font-size: 4rem; color: white; box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s ease; position: relative; z-index:2;
        }
        .album-art.playing { animation: rotate 10s linear infinite; }
        @keyframes rotate { from { transform: rotate(0deg);} to { transform: rotate(360deg);} }

        .song-info { text-align:center; margin-bottom:2rem; position:relative; z-index:2; }
        .song-title { font-size:1.3rem; font-weight:600; margin-bottom:0.5rem; color:#333; }
        .song-artist { font-size:1rem; color:#666; margin-bottom:1rem; }

        .visualizer { display:flex; justify-content:center; align-items:end; height:40px; gap:2px; margin:1rem 0; position:relative; z-index:2; }
        .bar { width:3px; background: linear-gradient(to top, #667eea, #764ba2); border-radius:2px; animation: bounce 1s ease-in-out infinite alternate; }
        @keyframes bounce { 0% { height:5px; } 100% { height:25px; } }

        .progress-container { margin-bottom:1rem; position:relative; z-index:2; }
        .progress-bar { width:100%; height:6px; background:#e0e0e0; border-radius:3px; cursor:pointer; position:relative; overflow:hidden; }
        .progress { height:100%; background: linear-gradient(90deg,#667eea,#764ba2); border-radius:3px; width:0%; transition: width 0.1s linear; }
        .time-info { display:flex; justify-content:space-between; font-size:0.9rem; color:#666; margin-bottom:2rem; }

        .controls { display:flex; justify-content:center; align-items:center; gap:1rem; margin-bottom:2rem; position:relative; z-index:2; }
        .control-btn { background: rgba(102,126,234,0.1); border:none; border-radius:50%; width:50px; height:50px; display:flex; align-items:center; justify-content:center; cursor:pointer; transition:all 0.3s ease; font-size:1.2rem; color:#667eea; }
        .control-btn:hover { background: rgba(102,126,234,0.2); transform:translateY(-2px); }
        .play-btn { width:70px; height:70px; background: linear-gradient(135deg,#667eea,#764ba2); color:white; font-size:1.8rem; }
        .play-btn:hover { transform:translateY(-3px); box-shadow: 0 10px 25px rgba(102,126,234,0.4); }

        .volume-container { display:flex; align-items:center; gap:1rem; margin-bottom:2rem; position:relative; z-index:2; }
        .volume-icon { color:#667eea; font-size:1.2rem; cursor:pointer; }
        .volume-slider { flex:1; height:4px; background:#e0e0e0; border-radius:2px; outline:none; cursor:pointer; -webkit-appearance:none; appearance:none; }
        .volume-slider::-webkit-slider-thumb { -webkit-appearance:none; width:16px; height:16px; background:linear-gradient(135deg,#667eea,#764ba2); border-radius:50%; cursor:pointer; }

        .playlist-toggle { background: rgba(102,126,234,0.1); border:none; padding:0.75rem 1.5rem; border-radius:25px; cursor:pointer; color:#667eea; font-weight:500; width:100%; margin-bottom:1rem; position:relative; z-index:2; }
        .playlist-toggle:hover { background: rgba(102,126,234,0.2); }

        .add-files { margin-top:0.5rem; background: transparent; border: 1px dashed rgba(102,126,234,0.25); padding:0.5rem; border-radius:12px; cursor:pointer; color:#667eea; width:100%; }

        .playlist { max-height:0; overflow:hidden; transition:max-height 0.3s ease; position:relative; z-index:2; }
        .playlist.open { max-height:300px; }
        .playlist-item { display:flex; align-items:center; padding:1rem; border-radius:10px; cursor:pointer; transition:all 0.3s ease; margin-bottom:0.5rem; }
        .playlist-item:hover { background: rgba(102,126,234,0.05); }
        .playlist-item.active { background: linear-gradient(135deg, rgba(102,126,234,0.12), rgba(118,75,162,0.08)); }

        .song-icon { width:40px; height:40px; background: linear-gradient(135deg,#667eea,#764ba2); border-radius:8px; display:flex; align-items:center; justify-content:center; color:white; margin-right:1rem; font-size:1.2rem; }
        .song-details h4 { margin:0 0 0.25rem 0; font-size:0.95rem; color:#333; }
        .song-details p { margin:0; font-size:0.85rem; color:#666; }

        .settings { display:flex; justify-content:space-between; align-items:center; margin-top:1rem; padding-top:1rem; border-top:1px solid rgba(102,126,234,0.15); position:relative; z-index:2; }
        .setting-item { display:flex; align-items:center; gap:0.5rem; font-size:0.9rem; color:#666; }
        .toggle-switch { position:relative; width:40px; height:20px; background:#e0e0e0; border-radius:10px; cursor:pointer; transition:background 0.3s ease; }
        .toggle-switch.active { background:#667eea; }
        .toggle-switch::before { content:''; position:absolute; top:2px; left:2px; width:16px; height:16px; background:white; border-radius:50%; transition:transform 0.3s ease; }
        .toggle-switch.active::before { transform:translateX(20px); }

        .notification { position: fixed; top:20px; right:20px; background: rgba(102,126,234,0.95); color:white; padding:1rem 1.5rem; border-radius:10px; backdrop-filter: blur(10px); transform: translateX(100%); transition: transform 0.3s ease; z-index:1000; }
        .notification.show { transform: translateX(0); }

        @media (max-width:480px) {
            .music-player { width:350px; padding:1.5rem; }
            .album-art { width:150px; height:150px; font-size:3rem; }
            .control-btn { width:45px; height:45px; }
            .play-btn { width:60px; height:60px; }
        }
    </style>
</head>
<body>
    <div class="music-player" id="playerRoot">
        <div class="player-header">
            <div class="player-title">üéµMusic Playerüéµ</div>
        </div>

        <div class="album-art" id="albumArt">üéµ</div>

        <div class="song-info">
            <div class="song-title" id="songTitle">Select a song</div>
            <div class="song-artist" id="songArtist">Unknown Artist</div>
        </div>

        <div class="visualizer" id="visualizer">
            <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
            <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
        </div>

        <div class="progress-container">
            <div class="progress-bar" id="progressBar">
                <div class="progress" id="progress"></div>
            </div>
            <div class="time-info">
                <span id="currentTime">0:00</span>
                <span id="duration">0:00</span>
            </div>
        </div>

        <div class="controls">
            <button class="control-btn" id="shuffleBtn" title="Shuffle">üîÄ</button>
            <button class="control-btn" id="prevBtn" title="Previous">‚èÆÔ∏è</button>
            <button class="control-btn play-btn" id="playBtn" title="Play">‚ñ∂Ô∏è</button>
            <button class="control-btn" id="nextBtn" title="Next">‚è≠Ô∏è</button>
            <button class="control-btn" id="repeatBtn" title="Repeat">üîÅ</button>
        </div>

        <div class="volume-container">
            <span class="volume-icon" id="volumeIcon">üîä</span>
            <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="50" />
        </div>

        <button class="playlist-toggle" id="playlistToggle">üìã Show Playlist</button>
        <button class="add-files" id="addFilesBtn">‚ûï Add Local Files</button>
        <input type="file" id="fileInput" accept="audio/*" multiple style="display:none" />

        <div class="playlist" id="playlist"></div>

        <div class="settings">
            <div class="setting-item">
                <span>Autoplay</span>
                <div class="toggle-switch" id="autoplayToggle"></div>
            </div>
            <div class="setting-item">
                <span>Shuffle</span>
                <div class="toggle-switch" id="shuffleToggle"></div>
            </div>
        </div>
    </div>

    <div class="notification" id="notification"></div>

    <script>
        class MusicPlayer {
            constructor() {
                this.currentSongIndex = 0;
                this.isPlaying = false;
                this.isShuffled = false;
                this.isRepeating = false;
                this.autoplay = true;
                this.volume = 0.5;

                // Real audio element
                this.audio = new Audio();
                this.audio.crossOrigin = 'anonymous';
                this.audio.volume = this.volume;

                // Playlist - initial "local file" placeholders (URLs are filenames; when adding via file input we'll use object URLs)
                this.playlist = [
                    { title: "There Is a Light That Never Goes Out (2011 Remaster) - The Smiths", artist: "Local File", url: "Musics/There Is a Light That Never Goes Out (2011 Remaster).mp3", icon: "üåü" },
                    { title: "Can't Help Falling in Love - Elvis Presley", artist: "Local File", url: "Musics/Elvis Presley - Can't Help Falling in Love (Lyrics).mp3", icon: "üé∫" },
                    { title: "The Night We Met - Lord Huron", artist: "Local File", url: "Musics/Lord Huron - The Night We Met (Official Audio).mp3", icon: "üåÉ" },
                    { title: "Until I Found You - Stephen Sanchez", artist: "Local File", url: "Musics/Stephen Sanchez - Until I Found You (Official Video).mp3", icon: "ü™∑" },
                    { title: "I Love You So - The Walters", artist: "Local File", url: "Musics/The Walters -- I Love You So.mp3", icon: "üåô" },
                    { title: "Que Sera Sera - Billianne", artist: "Local File", url: "Musics/Que Sera Sera - Billianne [Official Visualizer].mp3", icon: "‚ù§Ô∏è‚Äçü©π" }
                ];

                // State for fallback simulated tracks
                this.currentTime = 0;
                this.duration = 0;
                this.progressInterval = null;

                this.initializeElements();
                this.setupAudioEvents();
                this.setupEventListeners();
                this.renderPlaylist();
                this.loadSong(0);
            }

            initializeElements() {
                this.albumArt = document.getElementById('albumArt');
                this.songTitle = document.getElementById('songTitle');
                this.songArtist = document.getElementById('songArtist');
                this.playBtn = document.getElementById('playBtn');
                this.prevBtn = document.getElementById('prevBtn');
                this.nextBtn = document.getElementById('nextBtn');
                this.shuffleBtn = document.getElementById('shuffleBtn');
                this.repeatBtn = document.getElementById('repeatBtn');
                this.progressBar = document.getElementById('progressBar');
                this.progress = document.getElementById('progress');
                this.currentTimeEl = document.getElementById('currentTime');
                this.durationEl = document.getElementById('duration');
                this.volumeSlider = document.getElementById('volumeSlider');
                this.volumeIcon = document.getElementById('volumeIcon');
                this.playlistToggle = document.getElementById('playlistToggle');
                this.playlistEl = document.getElementById('playlist');
                this.autoplayToggle = document.getElementById('autoplayToggle');
                this.shuffleToggle = document.getElementById('shuffleToggle');
                this.visualizer = document.getElementById('visualizer');
                this.notification = document.getElementById('notification');
                this.fileInput = document.getElementById('fileInput');
                this.addFilesBtn = document.getElementById('addFilesBtn');

                // Set initial volume UI
                this.volumeSlider.value = this.volume * 100;
                this.updateVolumeIcon(this.volumeSlider.value);
            }

            setupAudioEvents() {
                this.audio.addEventListener('timeupdate', () => {
                    // For real audio, prefer the audio element's currentTime/duration when available
                    if (!isNaN(this.audio.duration)) {
                        this.currentTime = this.audio.currentTime;
                        this.duration = this.audio.duration;
                        this.updateProgress();
                    }
                });

                this.audio.addEventListener('ended', () => this.songEnded());
                this.audio.addEventListener('loadedmetadata', () => {
                    if (!isNaN(this.audio.duration)) {
                        this.duration = this.audio.duration;
                        this.durationEl.textContent = this.formatTime(this.duration);
                        this.updateProgress();
                    }
                });

                this.audio.addEventListener('error', () => {
                    const s = this.playlist[this.currentSongIndex];
                    if (s) s.needsUpload = true;
                    this.showNotification('Failed to load audio; check file/URL or add the file via "Add Local Files".');
                });
            }

            setupEventListeners() {
                this.playBtn.addEventListener('click', () => this.togglePlay());
                this.prevBtn.addEventListener('click', () => this.previousSong());
                this.nextBtn.addEventListener('click', () => this.nextSong());
                this.shuffleBtn.addEventListener('click', () => this.toggleShuffle());
                this.repeatBtn.addEventListener('click', () => this.toggleRepeat());

                this.progressBar.addEventListener('click', (e) => this.seekTo(e));
                this.volumeSlider.addEventListener('input', (e) => this.setVolume(e.target.value));

                this.playlistToggle.addEventListener('click', () => this.togglePlaylist());
                this.autoplayToggle.addEventListener('click', () => this.toggleAutoplay());
                this.shuffleToggle.addEventListener('click', () => this.toggleShuffleMode());

                // Add files button
                this.addFilesBtn.addEventListener('click', () => this.fileInput.click());
                this.fileInput.addEventListener('change', (e) => this.handleFileInput(e.target.files));

                // Keyboard shortcuts (ignore when typing in inputs)
                document.addEventListener('keydown', (e) => {
                    const active = document.activeElement;
                    const editing = active && (active.tagName === 'INPUT' || active.tagName === 'TEXTAREA' || active.isContentEditable);
                    if (editing) return;

                    if (e.code === 'Space') {
                        e.preventDefault();
                        this.togglePlay();
                    } else if (e.code === 'ArrowLeft') {
                        this.previousSong();
                    } else if (e.code === 'ArrowRight') {
                        this.nextSong();
                    }
                });

                // Visualizer animation interval
                setInterval(() => {
                    const playing = this.albumArt.classList.contains('playing');
                    const bars = document.querySelectorAll('.bar');
                    if (playing) {
                        bars.forEach(bar => {
                            const height = Math.random() * 25 + 5;
                            bar.style.height = `${height}px`;
                        });
                    }
                }, 200);
            }

            handleFileInput(fileList) {
                if (!fileList || fileList.length === 0) return;
                const files = Array.from(fileList);
                files.forEach(file => {
                    const url = URL.createObjectURL(file);
                    const title = file.name;
                    const artist = 'Local File';
                    this.playlist.push({ title, artist, url, icon: 'üéß', localFile: true });
                });
                this.renderPlaylist();
                this.showNotification(`Added ${files.length} file(s)`);
                // Reset input so the same file can be re-chosen later if needed
                this.fileInput.value = '';
            }

            renderPlaylist() {
                this.playlistEl.innerHTML = '';
                this.playlist.forEach((song, index) => {
                    const item = document.createElement('div');
                    item.className = 'playlist-item' + (index === this.currentSongIndex ? ' active' : '');

                    const durationText = song.duration ? this.formatTime(song.duration) : (song.url ? 'Audio' : '‚Äî');

                    item.innerHTML = `
                        <div class="song-icon">${song.icon || 'üéµ'}</div>
                        <div class="song-details">
                            <h4>${this.escapeHtml(song.title)}</h4>
                            <p>${this.escapeHtml(song.artist)} ‚Ä¢ ${durationText}</p>
                        </div>
                    `;
                    item.addEventListener('click', () => {
                        const wasPlaying = this.isPlaying;
                        this.loadSong(index);
                        // If player was playing, start the newly loaded song
                        if (wasPlaying) {
                            // small delay to ensure audio.src is processed
                            setTimeout(() => this.play(), 150);
                        }
                    });

                    this.playlistEl.appendChild(item);
                });
            }

            loadSong(index) {
                if (index < 0 || index >= this.playlist.length) return;
                this.currentSongIndex = index;
                const song = this.playlist[index];

                this.songTitle.textContent = song.title;
                this.songArtist.textContent = song.artist;
                this.albumArt.textContent = song.icon || 'üéµ';
                this.currentTime = 0;
                this.duration = song.duration || 0;

                // If song has a url, use the audio element
                if (song.url) {
                    // If it's a local object URL we already have it; otherwise we try the url as provided
                    try {
                        this.audio.src = song.url;
                        this.audio.load();
                    } catch (err) {
                        song.needsUpload = true;
                        this.showNotification('Failed to load track; try adding it via "Add Local Files".');
                    }
                } else {
                    // Fallback: simulate a length
                    this.duration = song.duration || 180;
                    this.currentTime = 0;
                    this.updateProgress();
                }

                this.durationEl.textContent = this.formatTime(this.duration || 0);
                this.currentTimeEl.textContent = this.formatTime(this.currentTime);
                this.progress.style.width = '0%';

                this.renderPlaylist();
                this.showNotification(`Loaded: ${song.title}`);
            }

            togglePlay() {
                if (this.isPlaying) this.pause();
                else this.play();
            }

            play() {
                const song = this.playlist[this.currentSongIndex];
                this.isPlaying = true;
                this.playBtn.textContent = '‚è∏Ô∏è';
                this.albumArt.classList.add('playing');

                if (song && song.url) {
                    this.audio.play().catch(() => {
                        this.showNotification('Playback failed (browser restriction / file missing).');
                        this.isPlaying = false;
                        this.playBtn.textContent = '‚ñ∂Ô∏è';
                        this.albumArt.classList.remove('playing');
                    });
                } else {
                    // Simulate playing for fallback tracks (no real URL)
                    this.startProgress();
                }
                this.showNotification('Playing');
            }

            pause() {
                const song = this.playlist[this.currentSongIndex];
                this.isPlaying = false;
                this.playBtn.textContent = '‚ñ∂Ô∏è';
                this.albumArt.classList.remove('playing');

                if (song && song.url) {
                    this.audio.pause();
                } else {
                    this.stopProgress();
                }
                this.showNotification('Paused');
            }

            startProgress() {
                this.stopProgress();
                this.progressInterval = setInterval(() => {
                    if (this.currentTime < this.duration) {
                        this.currentTime += 1;
                        this.updateProgress();
                    } else {
                        this.songEnded();
                    }
                }, 1000);
            }

            stopProgress() {
                if (this.progressInterval) {
                    clearInterval(this.progressInterval);
                    this.progressInterval = null;
                }
            }

            updateProgress() {
                // Use audio element values if they are valid numbers (handle 0 correctly)
                const audioDur = (this.audio && typeof this.audio.duration === 'number' && !isNaN(this.audio.duration)) ? this.audio.duration : null;
                const audioCur = (this.audio && typeof this.audio.currentTime === 'number' && !isNaN(this.audio.currentTime)) ? this.audio.currentTime : null;

                const dur = (audioDur !== null && audioDur > 0) ? audioDur : this.duration;
                const cur = (audioCur !== null) ? audioCur : this.currentTime;

                const safeDur = (typeof dur === 'number' && !isNaN(dur) && dur > 0) ? dur : 1;
                const progressPercent = Math.max(0, Math.min(100, (cur / safeDur) * 100));

                this.progress.style.width = `${progressPercent}%`;
                this.currentTimeEl.textContent = this.formatTime(cur);
                this.durationEl.textContent = this.formatTime(dur);
            }

            seekTo(e) {
                const rect = this.progressBar.getBoundingClientRect();
                const clickX = e.clientX - rect.left;
                const width = rect.width;
                const clickPercent = Math.max(0, Math.min(1, clickX / width));

                const audioDur = (this.audio && typeof this.audio.duration === 'number' && !isNaN(this.audio.duration)) ? this.audio.duration : null;
                const baseDur = (audioDur !== null && audioDur > 0) ? audioDur : this.duration;
                const newTime = clickPercent * baseDur;

                this.currentTime = newTime;
                if (this.playlist[this.currentSongIndex] && this.playlist[this.currentSongIndex].url && audioDur !== null) {
                    this.audio.currentTime = newTime;
                }
                this.updateProgress();
            }

            setVolume(value) {
                this.volume = Math.max(0, Math.min(1, value / 100));
                if (this.audio) this.audio.volume = this.volume;
                this.updateVolumeIcon(value);
            }

            updateVolumeIcon(value) {
                const val = Number(value);
                if (val === 0) this.volumeIcon.textContent = 'üîá';
                else if (val < 50) this.volumeIcon.textContent = 'üîâ';
                else this.volumeIcon.textContent = 'üîä';
            }

            previousSong() {
                const wasPlaying = this.isPlaying;
                if (this.isShuffled) {
                    this.currentSongIndex = Math.floor(Math.random() * this.playlist.length);
                } else {
                    this.currentSongIndex = this.currentSongIndex > 0 ? this.currentSongIndex - 1 : this.playlist.length - 1;
                }
                this.loadSong(this.currentSongIndex);
                if (wasPlaying) {
                    setTimeout(() => this.play(), 150);
                }
            }

            nextSong() {
                const wasPlaying = this.isPlaying;
                if (this.isShuffled) {
                    this.currentSongIndex = Math.floor(Math.random() * this.playlist.length);
                } else {
                    this.currentSongIndex = this.currentSongIndex < this.playlist.length - 1 ? this.currentSongIndex + 1 : 0;
                }
                this.loadSong(this.currentSongIndex);
                if (wasPlaying) {
                    setTimeout(() => this.play(), 150);
                }
            }

            songEnded() {
                this.stopProgress();
                if (this.isRepeating) {
                    // repeat current track
                    if (this.audio && this.audio.src) {
                        this.audio.currentTime = 0;
                        if (this.isPlaying) this.audio.play();
                    } else {
                        this.currentTime = 0;
                        if (this.isPlaying) this.startProgress();
                    }
                } else if (this.autoplay) {
                    this.nextSong();
                } else {
                    this.isPlaying = false;
                    this.playBtn.textContent = '‚ñ∂Ô∏è';
                    this.albumArt.classList.remove('playing');
                }
            }

            toggleShuffle() {
                this.isShuffled = !this.isShuffled;
                this.shuffleBtn.style.color = this.isShuffled ? '#667eea' : '#999';
                this.showNotification(this.isShuffled ? 'Shuffle ON' : 'Shuffle OFF');
            }

            toggleRepeat() {
                this.isRepeating = !this.isRepeating;
                this.repeatBtn.style.color = this.isRepeating ? '#667eea' : '#999';
                this.showNotification(this.isRepeating ? 'Repeat ON' : 'Repeat OFF');
            }

            togglePlaylist() {
                this.playlistEl.classList.toggle('open');
                const isOpen = this.playlistEl.classList.contains('open');
                this.playlistToggle.textContent = isOpen ? 'üìã Hide Playlist' : 'üìã Show Playlist';
            }

            toggleAutoplay() {
                this.autoplay = !this.autoplay;
                this.autoplayToggle.classList.toggle('active');
                this.showNotification(this.autoplay ? 'Autoplay ON' : 'Autoplay OFF');
            }

            toggleShuffleMode() {
                this.isShuffled = !this.isShuffled;
                this.shuffleToggle.classList.toggle('active');
                this.shuffleBtn.style.color = this.isShuffled ? '#667eea' : '#999';
                this.showNotification(this.isShuffled ? 'Shuffle ON' : 'Shuffle OFF');
            }

            formatTime(seconds) {
                if (typeof seconds !== 'number' || isNaN(seconds) || seconds <= 0) return '0:00';
                const mins = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return `${mins}:${secs.toString().padStart(2, '0')}`;
            }

            showNotification(message, ms = 2000) {
                if (!this.notification) return;
                this.notification.textContent = message;
                this.notification.classList.add('show');
                clearTimeout(this._notifTimer);
                this._notifTimer = setTimeout(() => {
                    this.notification.classList.remove('show');
                }, ms);
            }

            escapeHtml(unsafe) {
                return (unsafe || '')
                    .replace(/&/g, "&amp;")
                    .replace(/</g, "&lt;")
                    .replace(/>/g, "&gt;")
                    .replace(/"/g, "&quot;")
                    .replace(/'/g, "&#039;");
            }
        }

        document.addEventListener('DOMContentLoaded', () => new MusicPlayer());
    </script>
</body>

</html>
